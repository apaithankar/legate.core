#!/usr/bin/env bash

build_cpp_tests() {
    set -ex;

    cd ~/legate/tests/cpp

    cmake --fresh --preset ${LEGATE_CORE_CMAKE_PRESET}
    cmake --build --preset ${LEGATE_CORE_CMAKE_PRESET} --target package --verbose
    cp ./build/${LEGATE_CORE_CMAKE_PRESET}/cpp_tests.sh /tmp/out/

    { set +x; } 2>/dev/null;
}

build_cpp_tests "$@";
